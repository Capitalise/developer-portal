(self.webpackChunkdeveloper_portal_docusaurus=self.webpackChunkdeveloper_portal_docusaurus||[]).push([[8558],{85663:function(e,t,a){"use strict";a.r(t),a.d(t,{assets:function(){return y},contentTitle:function(){return N},default:function(){return T},frontMatter:function(){return b},metadata:function(){return w},toc:function(){return C}});var n=a(87462),i=a(63366),r=a(67294),l=a(3905),s=a(93456),o=a(9877),c=a(58215),p=a(86010),u=a(32125),d=(a(61793),a(72933)),m=a(49009),h=a(28084);function g(e){var t=(0,h.useAllPluginInstancesData)("docusaurus-plugin-redoc");return e?t[e]:Object.values(t)[0]}var k=["id","example","pointer"],f=function(e){var t=e.id,a=e.example,l=e.pointer,s=(0,i.Z)(e,k),o=g(t),c=(0,m.U)(o),h=c.store,f=c.darkStore,v=c.lightStore;return(0,r.useEffect)((function(){v.menu.dispose(),f.menu.dispose()}),[v,f]),r.createElement(u.ThemeProvider,{theme:h.options.theme},r.createElement("div",{className:(0,p.Z)(["redocusaurus","redocusaurus-schema",a?null:"hide-example"])},r.createElement(d.SchemaDefinition,(0,n.Z)({parser:h.spec.parser,options:h.options,schemaRef:l},s))))};f.defaultProps={example:!1};var v=["components"],b={displayed_sidebar:"useCasesSideBar",title:"Credit profile widget",tags:["API","JavaScript","Iframe"]},N=void 0,w={unversionedId:"credit-profile-widget",id:"credit-profile-widget",title:"Credit profile widget",description:"Help users improve their finanical health with credit profile information directly from your website.",source:"@site/use-cases/credit-profile-widget.mdx",sourceDirName:".",slug:"/credit-profile-widget",permalink:"/developer-portal/use-cases/credit-profile-widget",editUrl:"https://github.com/Capitalise/developer-portal/tree/main/use-cases/credit-profile-widget.mdx",tags:[{label:"API",permalink:"/developer-portal/use-cases/tags/api"},{label:"JavaScript",permalink:"/developer-portal/use-cases/tags/java-script"},{label:"Iframe",permalink:"/developer-portal/use-cases/tags/iframe"}],version:"current",frontMatter:{displayed_sidebar:"useCasesSideBar",title:"Credit profile widget",tags:["API","JavaScript","Iframe"]},sidebar:"useCasesSideBar",previous:{title:"Use cases",permalink:"/developer-portal/use-cases/"},next:{title:"Embedded funding search",permalink:"/developer-portal/use-cases/embedded-funding-search"}},y={},C=[{value:"Pre-requisites",id:"pre-requisites",level:2},{value:"Examples",id:"examples",level:2},{value:"Environments",id:"environments",level:2},{value:"Setup your account for Capitalise.com",id:"setup-your-account-for-capitalisecom",level:2},{value:"Sever-side",id:"sever-side",level:2},{value:"Generate <code>API key</code>",id:"generate-api-key",level:3},{value:"Generate Marketplace <code>master access token</code>",id:"generate-marketplace-master-access-token",level:3},{value:"Create a tenant",id:"create-a-tenant",level:3},{value:"Genenrate <code>tenant access token</code>",id:"genenrate-tenant-access-token",level:3},{value:"Set up profile",id:"set-up-profile",level:3},{value:"Client-side (mobile app or webapp)",id:"client-side-mobile-app-or-webapp",level:2},{value:"Embed widget using JavaScript",id:"embed-widget-using-javascript",level:3},{value:"Embed widget using iframe",id:"embed-widget-using-iframe",level:3},{value:"High-level sequence diagram",id:"high-level-sequence-diagram",level:2}],A={toc:C};function T(e){var t=e.components,r=(0,i.Z)(e,v);return(0,l.kt)("wrapper",(0,n.Z)({},A,r,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Help users improve their finanical health with credit profile information directly from your website."),(0,l.kt)("img",{src:a(56711).Z,alt:"Example banner",className:"featured-img"}),(0,l.kt)("p",null,"The widget is responsive to adapt to the space you assign."),(0,l.kt)("h2",{id:"pre-requisites"},"Pre-requisites"),(0,l.kt)("p",null,"To successfully show a widget, the company must be a limited company and have a valid Companies House number."),(0,l.kt)("p",null,"Therefore it's recommended only show the widget if you have a valid Companies House number."),(0,l.kt)("h2",{id:"examples"},"Examples"),(0,l.kt)("table",{className:"widget-examples"},(0,l.kt)("thead",null,(0,l.kt)("tr",null,(0,l.kt)("th",null,"Size"),(0,l.kt)("th",null,"Min width"),(0,l.kt)("th",null,"Example"))),(0,l.kt)("tbody",null,(0,l.kt)("tr",null,(0,l.kt)("td",null,"Small"),(0,l.kt)("td",null,"320px"),(0,l.kt)("td",null,(0,l.kt)("img",{src:a(56711).Z,alt:"Example banner"}))),(0,l.kt)("tr",null,(0,l.kt)("td",null,"Medium"),(0,l.kt)("td",null,"740px"),(0,l.kt)("td",null,(0,l.kt)("img",{src:a(49186).Z,alt:"Example banner"}))),(0,l.kt)("tr",null,(0,l.kt)("td",null,"Large"),(0,l.kt)("td",null,"1024px"),(0,l.kt)("td",null,(0,l.kt)("img",{src:a(4879).Z,alt:"Example banner"}))))),(0,l.kt)("h2",{id:"environments"},"Environments"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Environment"),(0,l.kt)("th",{parentName:"tr",align:null},"Base URL"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Demo"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"https://demo.capitalise.com"},"https://demo.capitalise.com")),(0,l.kt)("td",{parentName:"tr",align:null},"Get started with test credentials and life-like data")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Production"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"https://capitalise.com"},"https://capitalise.com")),(0,l.kt)("td",{parentName:"tr",align:null},"Launch your app with unlimited live credentials")))),(0,l.kt)("p",null,"For account setup, please contact our Commercial Director Olly Cummings at ",(0,l.kt)("a",{parentName:"p",href:"mailto:olly@capitalise.com"},"olly@capitalise.com"),"."),(0,l.kt)("div",{className:"admonition admonition-secondary alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Important")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("ul",{parentName:"div"},(0,l.kt)("li",{parentName:"ul"},"Data and credentials (e.g. ",(0,l.kt)("inlineCode",{parentName:"li"},"Logins"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"API Key"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"API Token"),") CANNOT be moved between Production and Demo"),(0,l.kt)("li",{parentName:"ul"},"Always double check if you've got the right credentials configured before production release")))),(0,l.kt)("h2",{id:"setup-your-account-for-capitalisecom"},"Setup your account for Capitalise.com"),(0,l.kt)("p",null,"Once you've signed MOU, your Partner Manager will send the invite so that you can complete the registration. If in doubt, please reach out to your Partner Manager."),(0,l.kt)("h2",{id:"sever-side"},"Sever-side"),(0,l.kt)("p",null,"On the server-side, you will be calling two sets of APIs:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"API"),(0,l.kt)("th",{parentName:"tr",align:null},"Base Path"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Platform V1"),(0,l.kt)("td",{parentName:"tr",align:null},"/api/platform/v1"),(0,l.kt)("td",{parentName:"tr",align:null},"Generating API Key that unique identifies your application")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Marketplace V2"),(0,l.kt)("td",{parentName:"tr",align:null},"/api/marketplace/v2"),(0,l.kt)("td",{parentName:"tr",align:null},"Launch your app with unlimited live credentials")))),(0,l.kt)("h3",{id:"generate-api-key"},"Generate ",(0,l.kt)("inlineCode",{parentName:"h3"},"API key")),(0,l.kt)("p",null,"Generate a ",(0,l.kt)("inlineCode",{parentName:"p"},"platform access token")," using your environment login to Capitalise.com."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Request"',title:'"Request"'},'curl --location --request POST \'https://demo.capitalise.com/api/platform/v1/auth/login\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'{\n  # highlight-start\n  "email": "YOUR_EMAIL",\n  "password": "YOUR_PASSWORD"\n  # highlight-end\n}\'\n')),(0,l.kt)("p",null,"Upon Successful 200, you will get your ",(0,l.kt)("inlineCode",{parentName:"p"},"API Key")," in the response."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'{\n  "key": "e6b6fefbd0c0762ab707c211923781b86f51a47ad323b0faec1d5ed58996026e40"\n}\n')),(0,l.kt)("h3",{id:"generate-marketplace-master-access-token"},"Generate Marketplace ",(0,l.kt)("inlineCode",{parentName:"h3"},"master access token")),(0,l.kt)("p",null,"To generate your ",(0,l.kt)("inlineCode",{parentName:"p"},"API Key"),", you would need to use the platform ",(0,l.kt)("inlineCode",{parentName:"p"},"access_token")," as your bearer token."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Request"',title:'"Request"'},'curl --location --request POST \'https://demo.capitalise.com/api/platform/v1/api-key\' \\\n# highlight-start\n--header \'Authorization: Bearer eyJhbG...{{PLATFORM_ACCESS_TOKEN}}...puwv4f2KGadrMwq681u_RQ\' \\\n# highlight-end\n--header \'Content-Type: application/json\' \\\n--data-raw \'{\n    # highlight-start\n    "name": "Widget testing", # This string needs to be unique\n    # highlight-end\n    "scopes": [\n        "profile:multiples",\n        "profile:read",\n        "profile:write",\n        "questionnaire:read",\n        "questionnaire:write",\n        "funding:read",\n        "funding:write",\n        "insights:read",\n        "scoring:read",\n        "offline_access"\n    ],\n    "expiresAt": "2022-07-26T13:29:11.631Z"\n}\'\n')),(0,l.kt)("p",null,"Now we move onto Marketplace APIs to generate ",(0,l.kt)("inlineCode",{parentName:"p"},"master access token"),". You will need to use your ",(0,l.kt)("inlineCode",{parentName:"p"},"API Key")," to do this."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Request"',title:'"Request"'},"curl --location --request POST 'https://bravo.dev.capitalise.com/api/marketplace/v2/auth/authorize' \\\n# highlight-start\n--header 'X-API-Key: e6b6fefbd0c0762ab707c211923781b86f51a47ad323b0faec1d5ed58996026e40'\n# highlight-end\n")),(0,l.kt)("p",null,"Upon Successful 201, you will get two Marketplace tokens:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"access_token"),": This is the token that you will use to access the Marketplace API. It will expire in 10 hours. You can use this token to access ",(0,l.kt)("inlineCode",{parentName:"li"},"/tenants"),"; but it will not be able to acccess ",(0,l.kt)("inlineCode",{parentName:"li"},"/profile"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"refresh_token"),": This is the token that allow you refresh your ",(0,l.kt)("inlineCode",{parentName:"li"},"access_token")," without using an ",(0,l.kt)("inlineCode",{parentName:"li"},"API Key")," for extra security. This token will be expired once you've used it to refresh `access_token.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'{\n  "access_token": "eyJhbGciO...{{MARKETPLACE_MASTER_ACCESS_TOKEN}}...V0GiDrY9sVzbZjQMDc1znR77Q",\n  "expires_in": 36000,\n  "refresh_token": "eyJhbGciO...{{MARKETPLACE_MASTER_REFRESH_TOKEN}}...zfoV3Ek3RxZZOSIl_IvULkIA",\n  "scope": "profile:multiples profile:read profile:write questionnaire:read questionnaire:write funding:read funding:write insights:read scoring:read offline_access",\n  "token_type": "Bearer"\n}\n')),(0,l.kt)("h3",{id:"create-a-tenant"},"Create a tenant"),(0,l.kt)("p",null,"Now we move onto Marketplace APIs to generate ",(0,l.kt)("inlineCode",{parentName:"p"},"master access token"),". You will need to use your ",(0,l.kt)("inlineCode",{parentName:"p"},"API Key")," to do this."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Request"',title:'"Request"'},"curl --location --request POST 'https://bravo.dev.capitalise.com/api/marketplace/v2/tenants' \\\n--header 'Authorization: Bearer eyJhbGciO...{{MARKETPLACE_MASTER_ACCESS_TOKEN}}...V0GiDrY9sVzbZjQMDc1znR77Q' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n    \"referenceId\": \"Unique Tenant ID\" # Optional but recommended - needs to be unique\n}'\n")),(0,l.kt)("p",null,"Upon Successful 201, you will get the tenant ID."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'{\n  {/* highlight-start */}\n  "id": "5ccaa9ba-e3d4-4c1b-865a-26ac02c2717d",\n  {/* highlight-end */}\n  "referenceId": "Unique Tenant ID",\n  "createdDateTime": "2022-04-25T00:16:28.000Z",\n  "updatedDateTime": "2022-04-25T00:16:28.000Z"\n}\n')),(0,l.kt)("h3",{id:"genenrate-tenant-access-token"},"Genenrate ",(0,l.kt)("inlineCode",{parentName:"h3"},"tenant access token")),(0,l.kt)("p",null,"Once a tenant is created, you can generate a ",(0,l.kt)("inlineCode",{parentName:"p"},"tenant access token")," to manage the tenant."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Request"',title:'"Request"'},"curl --location --request POST 'https://bravo.dev.capitalise.com/api/marketplace/v2/auth/tenants/authorize' \\\n# highlight-start\n--header 'Capitalise-tenant-id: 5ccaa9ba-e3d4-4c1b-865a-26ac02c2717d' \\\n--header 'Authorization: Bearer eyJhbGciO...{{MARKETPLACE_MASTER_ACCESS_TOKEN}}...3Fj_LK_-V0GiDrY9sVzbZjQMDc1znR77Q'\n# highlight-end\n")),(0,l.kt)("p",null,"Upon Successful 201, you will get the tenant ",(0,l.kt)("inlineCode",{parentName:"p"},"access_token"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'{\n  "access_token": "eyJhbGciOi...{{MARKETPLACE_TENANT_ACCESS_TOKEN}}...tRtpiO1aayuWslZ3_ssOQ5rxqGOYZQooBDICrJGVHcF2gg",\n  "expires_in": 36000,\n  "scope": "profile:read profile:write sign_up",\n  "token_type": "Bearer"\n}\n')),(0,l.kt)("h3",{id:"set-up-profile"},"Set up profile"),(0,l.kt)("p",null,"Now you can set up the profile for the tenant. The widget only need a valid Companies House number."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Request"',title:'"Request"'},"curl --location --request POST 'https://bravo.dev.capitalise.com/api/marketplace/v2/profile' \\\n      # highlight-start\n--header 'Authorization: Bearer eyJhbGciOi...{{MARKETPLACE_TENANT_ACCESS_TOKEN}}...tRtpiO1aayuWslZ3_ssOQ5rxqGOYZQooBDICrJGVHcF2gg' \\\n      # highlight-end\n--header 'Content-Type: application/json' \\\n--data-raw '{\n    \"companyInformation\": {\n      # highlight-start\n        \"registrationNumber\": \"11391321\"\n      # highlight-end\n    }\n}'\n")),(0,l.kt)("p",null,"If you get a 201 Successful response, it means you've set up the profile correctly for the tenant."),(0,l.kt)("h2",{id:"client-side-mobile-app-or-webapp"},"Client-side (mobile app or webapp)"),(0,l.kt)("p",null,"Now the exciting part - we will show the widget on the client-side so your end-user can see the credit profile at your site."),(0,l.kt)("h3",{id:"embed-widget-using-javascript"},"Embed widget using JavaScript"),(0,l.kt)("p",null,"By using JavaScript, you will be able to catch erros from the UI."),(0,l.kt)("p",null,"Add the following script before ",(0,l.kt)("inlineCode",{parentName:"p"},"</body>")," tag. The script will look for the element with class name ",(0,l.kt)("inlineCode",{parentName:"p"},"capFundingSearch")," and will create the widget within the element."),(0,l.kt)(o.Z,{groupId:"widget",mdxType:"Tabs"},(0,l.kt)(c.Z,{value:"demo",label:"Demo",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'<script>\n  !(function (e, t, n, i, a, c, s) {\n    (e[(a = a || "capitalise")] =\n      e[a] ||\n      function () {\n        (e[a].q = e[a].q || []).push(arguments);\n      }),\n      (e[a].l = 1 * new Date()),\n      (c = t.createElement(n)),\n      (s = t.getElementsByTagName(n)[0]),\n      (c.id = a),\n      (c.src = "https://demo.capitalise.com/app/ui/widget/widget.js"),\n      (c.async = 1),\n      s.parentNode.insertBefore(c, s);\n  })(window, document, "script");\n  capitalise("init", {\n    element: ".capFundingSearch",\n    // highlight-next-line\n    accessToken: "REPLACE_WITH_TENANT_ACCESS_TOKEN",\n    onError: console.error,\n  });\n<\/script>\n'))),(0,l.kt)(c.Z,{value:"production",label:"Production",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'<script>\n  !(function (e, t, n, i, a, c, s) {\n    (e[(a = a || "capitalise")] =\n      e[a] ||\n      function () {\n        (e[a].q = e[a].q || []).push(arguments);\n      }),\n      (e[a].l = 1 * new Date()),\n      (c = t.createElement(n)),\n      (s = t.getElementsByTagName(n)[0]),\n      (c.id = a),\n      (c.src = "https://capitalise.com/app/ui/widget/widget.js"),\n      (c.async = 1),\n      s.parentNode.insertBefore(c, s);\n  })(window, document, "script");\n  capitalise("init", {\n    element: ".capFundingSearch",\n    // highlight-next-line\n    accessToken: "REPLACE_WITH_MARKETPLACE_TENANT_ACCESS_TOKEN",\n    onError: console.error,\n  });\n<\/script>\n')))),(0,l.kt)("p",null,"Create an empty ",(0,l.kt)("inlineCode",{parentName:"p"},"div")," with ",(0,l.kt)("inlineCode",{parentName:"p"},"capitalise")," class at the place you want to show the widget."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-HTML"},'<div class="capFundingSearch"></div>\n')),(0,l.kt)("h3",{id:"embed-widget-using-iframe"},"Embed widget using iframe"),(0,l.kt)("p",null,"Alternatively, you can embed the widget using an iframe. The implementation is simplerl; but you won't be able to catch errors from the UI."),(0,l.kt)("p",null,"Insert the following code into your website and replace ",(0,l.kt)("inlineCode",{parentName:"p"},"TENANT_ACCESS_TOKEN")," with your tenant access token. Also, change the ",(0,l.kt)("inlineCode",{parentName:"p"},"height")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"width")," to match your needs."),(0,l.kt)(o.Z,{groupId:"widget",mdxType:"Tabs"},(0,l.kt)(c.Z,{value:"demo",label:"Demo",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'<iframe\n  \x3c!-- highlight-start --\x3e\n  src="https://demo.capitalise.com/app/ui/widget/embed.html?accessToken=REPLACE_WITH_MARKETPLACE_TENANT_ACCESS_TOKEN"\n  height="320px"\n  width="100%"\n  \x3c!-- highlight-end --\x3e\n  title="Credit profile"\n  frameborder="0"\n  scrolling="no" />\n'))),(0,l.kt)(c.Z,{value:"production",label:"Production",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'<iframe\n  \x3c!-- highlight-start --\x3e\n  src="https://capitalise.com/app/ui/widget/embed.html?accessToken=REPLACE_WITH_MARKETPLACE_TENANT_ACCESS_TOKEN"\n  height="320px"\n  width="100%"\n  \x3c!-- highlight-end --\x3e\n  title="Credit profile"\n  frameborder="0"\n  scrolling="no" />\n')))),(0,l.kt)("h2",{id:"high-level-sequence-diagram"},"High-level sequence diagram"),(0,l.kt)(s.Mermaid,{config:{},chart:"sequenceDiagram\n    autonumber\n    participant U as User\n    participant AF as API Partner (Frontend)\n    participant AB as API Partner (Backend)\n    participant CA as Capitalise (API)\n    participant CW as Capitalise (Widget)\n    Note over AF, CW: Step 1: Generate master access token and master refresh token\n    AB->>CA: POST /auth/authorize<br> with API key\n    CA->>AB: 201 OK with access_token and refresh_token\n    opt Regenerate master access token with master refresh token when master acces token expires\n        AB->>CA: POST /auth/refresh<br>with master refresh token\n        CA->>AB: 201 OK with access_token\n    end\n    U->>AF: View\n    AF->>AB: When user's company<br> has a valid Companies House number\n    Note over AF, CW: Step 2: Create a new tenant for the user\n    AB->>CA: POST /tenants<br>with master access token\n    CA->>AB: 201 OK with id as the tenant ID\n    Note over AF, CW: Step 3: Generate tenant access token\n    AB->>CA: POST /auth/tenants/authorize<br>with master access token\n    CA->>AB: 201 OK with access_token\n    Note over AF, CW: Step 4: Set up the profile\n    AB->>CA: POST /profile<br>with tenant access token and companyNumber\n    CA->>AB: 201 OK\n    Note over AF, CW: Step 5: Embed credit profile widget with tenant access token\n    AB->>CW: Embed credit profile widget with tenant access token\n    CW->>U: View",mdxType:"Mermaid"}))}T.isMDXComponent=!0},58215:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var n=a(67294);function i(e){var t=e.children,a=e.hidden,i=e.className;return n.createElement("div",{role:"tabpanel",hidden:a,className:i},t)}},9877:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var n=a(87462),i=a(67294),r=a(72389),l=a(17984),s=a(86010),o="tabItem_LplD";function c(e){var t,a,r,c=e.lazy,p=e.block,u=e.defaultValue,d=e.values,m=e.groupId,h=e.className,g=i.Children.map(e.children,(function(e){if((0,i.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),k=null!=d?d:g.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),f=(0,l.lx)(k,(function(e,t){return e.value===t.value}));if(f.length>0)throw new Error('Docusaurus error: Duplicate values "'+f.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var v=null===u?u:null!=(t=null!=u?u:null==(a=g.find((function(e){return e.props.default})))?void 0:a.props.value)?t:null==(r=g[0])?void 0:r.props.value;if(null!==v&&!k.some((function(e){return e.value===v})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+v+'" but none of its children has the corresponding value. Available values are: '+k.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var b=(0,l.UB)(),N=b.tabGroupChoices,w=b.setTabGroupChoices,y=(0,i.useState)(v),C=y[0],A=y[1],T=[],E=(0,l.o5)().blockElementScrollPositionUntilNextRender;if(null!=m){var _=N[m];null!=_&&_!==C&&k.some((function(e){return e.value===_}))&&A(_)}var S=function(e){var t=e.currentTarget,a=T.indexOf(t),n=k[a].value;n!==C&&(E(t),A(n),null!=m&&w(m,n))},P=function(e){var t,a=null;switch(e.key){case"ArrowRight":var n=T.indexOf(e.currentTarget)+1;a=T[n]||T[0];break;case"ArrowLeft":var i=T.indexOf(e.currentTarget)-1;a=T[i]||T[T.length-1]}null==(t=a)||t.focus()};return i.createElement("div",{className:"tabs-container"},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":p},h)},k.map((function(e){var t=e.value,a=e.label,r=e.attributes;return i.createElement("li",(0,n.Z)({role:"tab",tabIndex:C===t?0:-1,"aria-selected":C===t,key:t,ref:function(e){return T.push(e)},onKeyDown:P,onFocus:S,onClick:S},r,{className:(0,s.Z)("tabs__item",o,null==r?void 0:r.className,{"tabs__item--active":C===t})}),null!=a?a:t)}))),c?(0,i.cloneElement)(g.filter((function(e){return e.props.value===C}))[0],{className:"margin-vert--md"}):i.createElement("div",{className:"margin-vert--md"},g.map((function(e,t){return(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==C})}))))}function p(e){var t=(0,r.Z)();return i.createElement(c,(0,n.Z)({key:String(t)},e))}},11748:function(e,t,a){var n={"./locale":89234,"./locale.js":89234};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=11748},4879:function(e,t,a){"use strict";t.Z=a.p+"assets/images/credit-profile-widget-large-999db0042c58430ce5a812cc3f13aeb8.png"},49186:function(e,t,a){"use strict";t.Z=a.p+"assets/images/credit-profile-widget-medium-ace947c55a01ce4c2c171a568db26608.png"},56711:function(e,t,a){"use strict";t.Z=a.p+"assets/images/credit-profile-widget-small-42c2889c792dbcac2ac313818dcd509d.png"},15101:function(){},42116:function(){},23197:function(){}}]);